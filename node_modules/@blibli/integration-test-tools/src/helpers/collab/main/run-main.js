const { spawn } = require('../../../utils/proc')
const pathUtil = require('../../../utils/path')
const { mainUi } = require('../../blibli-integration-test.config')
const chalk = require('chalk')

function mainRun () {
  if (!mainUi) {
    console.log(chalk.yellow('No mainUi config detected, exiting.'))
    return
  }

  const script = mainUi.script || 'dev-nomock-desktop'
  const { targetDir } = mainUi
  const MAIN_DIR = pathUtil.getPath('integrations', '_blibli', targetDir)

  console.log(chalk.blue('Running Main UI'))
  const cmd = 'npm'
  const args = [
    'run',
    script
  ]
  return spawn(cmd, args, {
    cwd: MAIN_DIR
  })
}

module.exports = {
  mainRun
}
