const path = require('path')
const templates = require('./templates')
const fsUtil = require('../../utils/fs')

const targets = ['desktop', 'mobile']
const dirPath = path.join('.', 'integrations', 'specs', 'test-feature')

function _capitalizeFirstLetter (text) {
  const result = path.join(text.charAt(0).toUpperCase() + text.slice(1))

  return result
}

/**
 * handle generate dir specs & file *-test.specs.js
 */
function _generateTestSpec (type) {
  const dir = path.join(dirPath, type)
  const fileName = type + '-test.spec.js'
  const filePath = path.join(dir, fileName)
  const typeTestSpec = _capitalizeFirstLetter(type)

  fsUtil.createDirIfNotExists(dir)
  fsUtil.writeFileIfNotExists(filePath, templates.testSpecs.fullTestSpec(typeTestSpec))
}

function generate () {
  targets.forEach(_generateTestSpec)
}

module.exports = {
  generate
}
