const chalk = require('chalk')
const templates = require('./templates')
const fsUtil = require('../../utils/fs')
const pathUtil = require('../../utils/path')

// get path package.json user
const packageUserPath = pathUtil.getPath('package.json')

// insert package.json to variable
const packageUser = require(packageUserPath)

function generate () {
  packageUser.scripts = {
    ...packageUser.scripts,
    ...templates.integration.integrationScripts
  }

  // convert object to string
  const result = JSON.stringify(packageUser, null, 2)

  try {
    fsUtil.writeFile(packageUserPath, result)
    console.log(chalk.green(`Generated: integration scripts in "${packageUserPath}"`))
  } catch (err) {
    console.error(err)
  }
}

module.exports = {
  generate
}
