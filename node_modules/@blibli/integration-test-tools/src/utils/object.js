const deepSort = require('smart-deep-sort')

function deepSortAndStringify (obj) {
  const sorted = deepSort(obj)
  return JSON.stringify(sorted)
}

function constructQueryParams (str) {
  if (!str) return {}
  const queryParams = new URLSearchParams(str)
  const queries = Object.fromEntries(queryParams.entries())
  return deepSortAndStringify(queries)
}

module.exports = {
  deepSortAndStringify,
  constructQueryParams
}
