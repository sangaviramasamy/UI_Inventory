const nodeEval = require('node-eval')
const HEADER_MOBILE_HEIGHT = 56
const STICKY_NAV_HEIGHT = 47

async function scrollTo (page, { x = 0, y = 0 } = {}) {
  const scrollTo = `(el) => {
    window.scrollTo( ${x}, ${y} )
  }`
  await page.$eval('body', nodeEval(scrollTo))
}

async function scrollToSelector (page, selector) {
  const heightAdjustment = HEADER_MOBILE_HEIGHT + STICKY_NAV_HEIGHT
  const scrollTo = `(el) => {
    window.scrollTo(0, el.offsetTop - ${heightAdjustment} )
  }`
  await page.$eval(selector, nodeEval(scrollTo))
}

module.exports = {
  scrollToSelector,
  scrollTo
}
