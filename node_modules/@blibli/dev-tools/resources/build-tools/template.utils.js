const path = require('path')

const VUE_REGEX = /vue/g
const UNDERSCORE_REGEX = /__/g

function getBaseDirName ( file, format='' ) {
  const filePath = getBasePath(file, format)
  const dir = path.dirname(filePath).replace('src', 'dist') + '/'
  return dir
}

function getBaseFileName ( file, format='', infix='' ) {
  const filePath = getBasePath(file, format).replace(VUE_REGEX, 'js')
  const name = path.basename(filePath)
  const segments = name.split('.')
  const newName = [
    ...segments.slice(0, -1),
    infix,
    'js'
  ].filter(i => i)
  .join('.')
  return newName
}

function getBasePath ( file, format ) {
  const res = file.replace(`.${format}.config.js`, '')
  const filePath = res.replace(UNDERSCORE_REGEX, '/')
  return filePath
}

module.exports = {
  getBaseDirName,
  getBaseFileName,
  getBasePath
}
